(this["webpackJsonphotel-dreams"]=this["webpackJsonphotel-dreams"]||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/houseLogo.762b418e.png"},17:function(e,t,a){e.exports=a(29)},22:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=(a(22),a(9)),i=a(2),s=a(4),u=a(6),m=a(5),h=a(7),p=function e(){Object(i.a)(this,e)};p.apiURL="https://wt-8a099f3e7c73b2d17f4e018b6cfd6131-0.sandbox.auth0-extend.com/acamica",p.getHotels=function(e){fetch(p.apiURL).then((function(e){return e.json()})).catch((function(e){return console.error("Error",e)})).then((function(t){return e(t)}))};var f=a(15),b=a.n(f),d=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"aca-header"},r.a.createElement("img",{src:b.a,alt:"Logo",className:"aca-header__logo"}),r.a.createElement("h1",{className:"aca-header__title"},"Hotel Dreams"))}}]),t}(r.a.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement("section",{className:"aca-hotels-grid"},e)}}]),t}(r.a.Component),v=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.filterResultCount,t="".concat(e," hotels matches with the current filter");return 1===e&&(t="Only ".concat(e," hotel match with the current filter")),0===e&&(t="Sorry, but any hotel match the current filter"),r.a.createElement("p",{className:"aca-search-result"},t)}}]),t}(r.a.Component),y=a(10),j=a(12),E=a(3),g=a.n(E),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).getPrice=function(e){for(var t=[],a=0;a<e;a++)t.push(r.a.createElement(y.a,{key:a,icon:j.a}));return t},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.slug,a=e.name,n=e.photo,c=e.description,o=e.availabilityFrom,l=e.availabilityTo,i=e.rooms,s=e.city,u=e.country,m=e.price,h=g()(o).format("LL"),p=g()(l).format("LL");return r.a.createElement("article",{className:"aca-hotel"},r.a.createElement("header",{className:"aca-hotel__header"},r.a.createElement("img",{src:n,alt:t,className:"aca-hotel__photo"})),r.a.createElement("main",{className:"aca-hotel__body"},r.a.createElement("h2",{className:"aca-hotel__name"},a),r.a.createElement("section",{className:"aca-hotel__info-dates"},r.a.createElement("p",{className:"aca-hotel__info-place"},s," / ",u),r.a.createElement("p",{className:"aca-hotel__info"},"Availability between ",r.a.createElement("span",{className:"aca-hotel__info-value"},h)," to ",r.a.createElement("span",{className:"aca-hotel__info-value"},p)),r.a.createElement("p",{className:"aca-hotel__info"},r.a.createElement(y.a,{icon:j.b})," ",r.a.createElement("span",{className:"aca-hotel__info-value"},i)," rooms")),r.a.createElement("p",{className:"aca-hotel__description"},c),r.a.createElement("p",{className:"aca-hotel__price"},this.getPrice(m)),r.a.createElement("button",{className:"aca-hotel__reserve-button"},"Reserve now")))}}]),t}(r.a.Component),N=a(16),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).get=function(e,t){var a=e.map((function(e){return e[t]})),n=new Set(a);return Object(N.a)(n)},a.renderOptions=function(e){return e.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.props.setFilter(n,r)},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hotels,a=e.filter,n=a.dateFrom,c=a.dateTo,o=a.country,l=a.price,i=a.roomsCount,s=this.get(t,"country").sort(),u=this.get(t,"price").sort((function(e,t){return e>t?1:t>e?-1:0})),m=this.get(t,"rooms").sort((function(e,t){return e>t?1:t>e?-1:0}));return r.a.createElement("section",{className:"aca-filterbar"},r.a.createElement("input",{name:"dateFrom",type:"date",className:"aca-input",value:n,onChange:this.handleChange}),r.a.createElement("input",{name:"dateTo",type:"date",className:"aca-input",value:c,onChange:this.handleChange}),r.a.createElement("select",{name:"country",className:"aca-input",onChange:this.handleChange,value:o},r.a.createElement("option",{value:""},"All countries"),this.renderOptions(s,o)),r.a.createElement("select",{name:"price",className:"aca-input",onChange:this.handleChange,value:l},r.a.createElement("option",{value:"0"},"All prices"),this.renderOptions(u,l)),r.a.createElement("select",{name:"roomsCount",className:"aca-input",onChange:this.handleChange,value:i},r.a.createElement("option",{value:"0"},"All rooms count"),this.renderOptions(m,i)))}}]),t}(r.a.Component);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setFilter=function(e,t){var n={};"dateFrom"===e&&g()(t).unix()>g()(a.state.filter.dateTo).unix()&&(n.dateTo=t),"dateTo"===e&&g()(a.state.filter.dateFrom).unix()>g()(t).unix()&&(n.dateFrom=t),a.setState((function(a){return{filter:k({},a.filter,{},n,Object(l.a)({},e,t))}}))},a.renderHotels=function(e){return e.map((function(e,t){return r.a.createElement(_,Object.assign({},e,{key:t}))}))},a.filterHotels=function(e,t){return t.filter((function(t){var a=g()(e.dateFrom).unix(),n=g()(e.dateTo).unix(),r=g()(t.availabilityFrom).unix(),c=a<=g()(t.availabilityTo).unix()&&n>=r,o=""===e.country||e.country===t.country,l=0===parseInt(e.price)||parseInt(e.price)===t.price,i=0===parseInt(e.roomsCount)||parseInt(e.roomsCount)===t.rooms;return c&&o&&l&&i}))},a.state={hotels:[],filter:{dateFrom:g()().format("YYYY-MM-DD"),dateTo:g()().add(1,"year").format("YYYY-01-01"),country:"",price:0,roomsCount:0}},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.getHotels((function(t){e.setState({hotels:t})}))}},{key:"render",value:function(){var e=this.state,t=e.hotels,a=e.filter,n=this.filterHotels(a,t);return r.a.createElement("main",null,r.a.createElement(d,null),r.a.createElement(C,{hotels:t,filter:a,setFilter:this.setFilter}),r.a.createElement(v,{filterResultCount:n.length}),r.a.createElement(O,null,this.renderHotels(n)))}}]),t}(r.a.Component);o.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.437723bd.chunk.js.map